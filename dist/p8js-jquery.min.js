/*!
 * p8js - v0.4.3 -
 * plus8.ch
 * 
 * Copyright (c) 2012, Claudio Romano
 * Licensed Apache-2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Date: 2012-11-23 13:45:17 +0100
 */
Date.prototype.p8fromJSON=function(e){var t,n,r,i=1,s=e.split("T"),o=s[0].split("-"),u=s[1].split(":"),a=u[u.length-1],f;return r=a.charAt(a.length-1),r==="Z"?(t=0,u[u.length-1]=a.substr(0,a.length-2)):(a[a.length-1].indexOf("+")!==-1?(n="+",i=1):(n="-",i=-1),f=a.split(n),u[u.length-1]=f[0],f=f[1].split(":"),t=f[0]*60+f[1],t=t*60*1e3),this.setTime(Date.UTC(o[0],o[1]-1,o[2],u[0],u[1],u[2])+t*i),this},Date.prototype.p8toJSON=function(){function t(e){return e<10?"0"+e:e}function n(e){return e<10?"00"+e:e<100?"0"+e:e}var e=this;return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+n(e.getUTCMilliseconds())+"Z"},Date.prototype.p8DeDate=function(e){function n(e){return e<10?"0"+e:e}function r(e){return e<10?"00"+e:e<100?"0"+e:e}var t=this,i=n(t.getUTCDate())+"."+n(t.getUTCMonth()+1)+"."+t.getUTCFullYear();return e===!0&&(i+=" "+n(t.getUTCHours())+":"+n(t.getUTCMinutes())),i},function(e){e.extend({nl2br:function(e){return typeof e=="string"?e.replace(/(\r\n)|(\n\r)|\r|\n/g,"<br />"):e}})}(jQuery),function(e){e.extend({getUrlVars:function(e){e===undefined&&(e=window.location.href);var t=[],n,r=e.slice(e.indexOf("?")+1).split("&");for(var i=0;i<r.length;i++)n=r[i].split("="),t.push(n[0]),t[n[0]]=n[1];return t},getUrlVar:function(t,n){return e.getUrlVars(n)[t]}})}(jQuery),function(e){e.extend({scaleSize:function(e,t,n,r,i){var s=r/n,o=t/e;return n>=e&&s<=o?(n=e,r=n*s):r>=t&&(r=t,n=r/s),i!==!0?[n,r]:[Math.round(n),Math.round(r)]}})}(jQuery),function(e){e.extend({extractUrl:function(t){var n=/url\(["']?([^'")]+)['"]?\)/;return t.replace(n,"$1")}})}(jQuery),function(e){}(jQuery),function(e){e.fn.p8InfoTip=function(t){function n(t,n){function u(){if(i===!0)return;i=!0;var r=0;n.topAlign==="center"&&(r=s.width()/2-t.width()/2);var o=t.offset(),u=o;u.top=o.top+t.height()-10,u.left=o.left-r,n.removeOnClickOutside&&e("#p8-infoTip-overlay").css({width:e(document).width(),height:e(document).height()}).show(),s.css("position","absolute").css("z-index",n.zindex).css("display","block").css("opacity",.5),s.css(u),s.animate({opacity:n.opacity,top:u.top+15},{queue:!1,duration:n.speed})}function a(r){r!==undefined&&(n.content=r,e(".content",s).empty().append(r));if(n.content===undefined)return;u(),n.removeAfter>0&&setTimeout(function(){(n.removeAfterIfFocus||!t.is(":focus"))&&f()},n.removeAfter),n.showTrigger!==undefined&&n.showTrigger.call()}function f(){i&&(i=!1,n.removeOnClickOutside&&e("#p8-infoTip-overlay").hide(),s.animate({opacity:0,top:"+=10"},n.hideSpeed,function(){s.css("display","none")}),n.hideTrigger!==undefined&&n.hideTrigger.call())}function l(){n.removeOnClickOutside&&e("#p8-infoTip-overlay").hide(),s.fadeOut(n.speed,function(){e(this).remove()}),t.removeData("p8InfoTip",null)}var r=this,i=!1,s=e('<div class="'+n.tipClass+'"><div class="top" style="text-align:'+n.topAlign+';"><img src="'+n.peackImage+'"></div><div class="content" style="width:'+n.width+'"></div></div>');s.hide(),e("body").append(s),n.removeOnFocusLost&&t.blur(function(){setTimeout(function(){(n.removeAfterIfFocus||!t.is(":focus"))&&f()},n.removeAfter)});if(n.removeOnClickOutside){if(e("#p8-infoTip-overlay").size()===0){var o=e('<div id="p8-infoTip-overlay"/>').css({opacity:0,"z-index":n.zindex-1}).hide();e("body").append(o)}e("#p8-infoTip-overlay").click(function(){return f(),!1})}n.content!==undefined&&e(".content",s).append(n.content),e.extend(r,{show:function(e){a(e)},hide:function(){f()},isShowing:function(){return i},destroy:function(){l()}})}return t=e.extend({},e.fn.p8InfoTip.defaults,t),this.each(function(){var r=e(this),i=r.data("p8InfoTip");i||(i=new n(r,t),r.data("p8InfoTip",i))}),this},e.fn.p8InfoTip.defaults={tipClass:"error-tip",opacity:.8,speed:375,hideSpeed:125,width:"150px",removeAfter:1300,removeAfterIfFocus:!1,removeOnFocusLost:!0,removeOnClickOutside:!0,zindex:2005,content:undefined,peackImage:"res/images/error-tip_top.png",topAlign:"center",hideTrigger:undefined,showTrigger:undefined}}(jQuery),function(e){e.fn.p8SimpleGrid=function(t){var n=jQuery.extend({horizontal:!1,totalInRow:4},t),r=this;r.addClass("p8SimpleGrid").addClass("gridded-content").css({"z-index":2});var i=0,s=0,o=null,u=n.horizontal===!1?"col":"row";return this.children().each(function(){s===0&&(o=e("<div></div>").addClass("grid").addClass(u).addClass(u+"-"+i)),o.append(e(this)),r.append(o),s===n.totalInRow-1?(i++,s=0):s++})}}(jQuery),function(e){e.fn.p8AddHint=function(){return this.each(function(){var e=jQuery(this),t=this.title;e.val()===""&&(e.addClass("hint_text"),e.val(t)),e.focus(function(){e.val()===t&&(e.removeClass("hint_text"),e.val(""))}),e.blur(function(){e.val()===""&&(e.addClass("hint_text"),e.val(t))})})}}(jQuery),function(e){e.fn.p8uiTwoColPanel=function(t){var n=jQuery.extend({data:null,valueFields:[],prefix:"",innerClass:"form-row-inner"},t);return this.each(function(){var t=e(this),r=null,i=n.valueFields.length,s=0;for(var o=0;o<i;o++){var u=n.valueFields[o];o%2===0&&(s=0,r=e('<div class="'+n.innerClass+" edit p8TwoCol-row-"+o/2+" "+i+'" />'),o===0&&r.addClass("p8TwoCol-row-first"),t.append(e('<div class="'+n.innerClass+'-wrap" />').append(r))),o===i-1&&r!==null&&r.addClass("p8TwoCol-row-last"),u.type==="text"?r.append(e("<span />").addClass("col-"+s).p8ValueField({data:n.data,valueField:u.value,prefix:n.prefix,title:u.title,rules:u.rules})):u.type==="select"&&r.append(e("<span />").addClass("col-"+s).p8TypeSelect({types:u.types,data:n.data,typeField:u.value,customValueField:u.customValueField,prefix:n.prefix,title:u.title,rules:{minlength:2,required:!0,messages:{minlength:"Please, at least {0} characters are necessary"}}})),s++}return e(this)})}}(jQuery),function(e){e.fn.p8uiSimpleSearchPanel=function(t){var n=jQuery.extend({okFunc:null,cancelFunc:null,cancelText:"Cancel",contentTop:null,contentRight:null,fieldName:"search",fieldTitle:"Search"},t);return this.each(function(){var t=e(this);if(n.contentTop!==null){var r=e('<div class="p8-simpleSearchPanel-top" />').append(n.contentTop);t.append(r)}var i=e("<input />").attr("type","text").attr("name",n.fieldName).attr("title",n.fieldTitle);i.keypress(function(t){var r=t.which?t.which:t.keyCode;r===13&&e.isFunction(n.okFunc)&&n.okFunc.call(this)});var s=e('<div class="p8-simpleSearchPanel-field" />');n.contentRight!==null&&s.append(n.contentRight),s.append(i),t.append(s);if(n.buttons!==null){var o=e('<div class="p8-simpleSearchPanel-button" />').append(e("<button />").html(n.cancelText).button().click(function(){}));t.append(o)}})}}(jQuery);